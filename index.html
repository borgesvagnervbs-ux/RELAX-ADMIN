<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Painel Administrador - Massagens Zen</title>
  <link rel="stylesheet" href="style-admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Tela de Login Admin -->
  <div id="loginScreenAdmin" class="auth-screen">
    <div class="auth-container">
      <div class="logo-placeholder" style="width: 80px; height: 80px; margin: 0 auto 24px;"></div>
      <h1 style="text-align: center; margin-bottom: 8px;">Painel Administrativo</h1>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: 32px;">Acesso restrito</p>
      
      <div style="margin-bottom: 12px;">
        <input id="adminLoginEmail" type="email" class="input" placeholder="Email" required/>
      </div>
      <div style="margin-bottom: 16px;">
        <input id="adminLoginPassword" type="password" class="input" placeholder="Senha" required/>
      </div>
      <button class="btn btn-primary" onclick="loginAdmin()" style="width: 100%;">Entrar no Painel</button>
      
      <div class="divider">ou</div>
      
      <button class="btn btn-google" onclick="loginAdminWithGoogle()" style="width: 100%;">
        <svg width="18" height="18" viewBox="0 0 18 18" style="margin-right: 8px;">
          <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
          <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
          <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9c0 1.452.348 2.827.957 4.042l3.007-2.335z"/>
          <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
        </svg>
        Admin com Google
      </button>
    </div>
  </div>

  <!-- Painel Admin -->
  <div id="mainScreenAdmin" class="hidden">
    <header class="app-header">
      <button class="hamburger" id="btnMenu" aria-label="Abrir menu">â˜°</button>
      <div class="logo-placeholder" id="logoAdmin"></div>
      <div class="header-title">
        <h1>Painel Administrador</h1>
        <p id="adminGreeting">Gerencie agendamentos</p>
      </div>
    </header>

    <div class="app-wrap">
      <aside class="sidebar" id="sidebar">
        <div class="sb-logo">
          <div class="logo-placeholder"></div>
          <div>
            <div style="font-weight:800">Massagens Zen</div>
            <div class="small">Painel Administrativo</div>
          </div>
        </div>

        <nav class="sb-menu">
          <div class="sb-item active" data-tab="dashboard">Dashboard</div>
          <div class="sb-item" data-tab="types">Tipos de Massagem</div>
          <div class="sb-item" data-tab="appointments">Agendamentos</div>
          <div class="sb-item" data-tab="finance">Controle Financeiro</div>
        </nav>

        <div class="sb-footer">
          <button class="btn btn-danger btn-sm" onclick="logoutAdmin()" style="width:100%;margin-bottom:8px">Sair</button>
          <div class="small" style="text-align:center">VersÃ£o 1.0</div>
        </div>
      </aside>

      <main class="container" id="mainContent">
        <section class="card" id="tab-dashboard">
          <div class="cal-top">
            <div>
              <h3>CalendÃ¡rio</h3>
              <div class="small">Selecione um dia para gerenciar horÃ¡rios</div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost" id="btnToday">Hoje</button>
              <select id="viewMode" class="input" style="width:160px">
                <option value="month">VisÃ£o Mensal</option>
                <option value="week">VisÃ£o Semanal</option>
              </select>
            </div>
          </div>

          <div id="calendarArea">
            <div id="calendarClient" class="calendar-client"></div>
          </div>

          <div id="weekArea" class="hidden">
            <div class="week-container" id="weekContainer"></div>
          </div>

          <div id="dayDetail" class="hidden">
            <div class="card" style="margin-top:16px">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                <div>
                  <div style="font-weight:800;font-size:1.2rem" id="selectedDayTitle">Selecione um dia</div>
                  <div class="small" id="selectedDaySub">â€”</div>
                </div>
              </div>
              <div id="hourlyList"></div>
            </div>
          </div>
        </section>

        <section class="card hidden" id="tab-types">
          <h3>Tipos de Massagem</h3>
          <div class="small">Cadastre nome e valor por hora</div>
          <div class="row" style="margin-top:8px">
            <input id="typeName" class="input col" placeholder="Ex: Relaxante"/>
            <input id="typePrice" class="input" placeholder="R$ 0,00" style="width:140px"/>
          </div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn btn-primary" id="btnAddType">Salvar tipo</button>
            <button class="btn btn-ghost" id="btnReloadTypes">Atualizar</button>
          </div>
          <div id="typesList" style="margin-top:12px"></div>
        </section>

        <section class="card hidden" id="tab-appointments">
          <h3>Agendamentos</h3>
          <div class="small">Filtre e gerencie seus agendamentos</div>
          
          <!-- Filtros de PerÃ­odo -->
          <div class="period-filters">
            <button class="period-btn" data-period="current-week">
              <span class="period-icon">ğŸ“…</span>
              <span>Semana Atual</span>
            </button>
            <button class="period-btn active" data-period="current-month">
              <span class="period-icon">ğŸ“†</span>
              <span>MÃªs Atual</span>
            </button>
            <button class="period-btn" data-period="custom">
              <span class="period-icon">ğŸ—“ï¸</span>
              <span>PerÃ­odo Personalizado</span>
            </button>
          </div>

          <!-- Filtros de Data Personalizados -->
          <div id="customPeriodFilters" class="hidden" style="margin-top:12px">
            <div class="row">
              <div class="col">
                <label class="small" style="display:block;margin-bottom:6px;font-weight:600">Data InÃ­cio:</label>
                <input type="date" id="filterDateStart" class="input">
              </div>
              <div class="col">
                <label class="small" style="display:block;margin-bottom:6px;font-weight:600">Data Fim:</label>
                <input type="date" id="filterDateEnd" class="input">
              </div>
            </div>
            <button class="btn btn-primary btn-sm" onclick="applyCustomPeriod()" style="margin-top:8px">Aplicar Filtro</button>
          </div>

          <!-- Filtros de Status -->
          <div class="filter-status-container">
            <button class="filter-status-btn active" data-filter="todos">
              <span class="filter-icon">ğŸ“‹</span>
              <span>Todos</span>
            </button>
            <button class="filter-status-btn" data-filter="PENDENTE">
              <span class="filter-icon">â³</span>
              <span>Pendentes</span>
            </button>
            <button class="filter-status-btn" data-filter="CONFIRMADO">
              <span class="filter-icon">âœ“</span>
              <span>Confirmados</span>
            </button>
            <button class="filter-status-btn" data-filter="REALIZADO">
              <span class="filter-icon">âœ“</span>
              <span>Realizados</span>
            </button>
            <button class="filter-status-btn" data-filter="CANCELADO">
              <span class="filter-icon">âœ—</span>
              <span>Cancelados</span>
            </button>
            <button class="filter-status-btn" data-filter="pago">
              <span class="filter-icon">ğŸ’°</span>
              <span>Pagos</span>
            </button>
            <button class="filter-status-btn" data-filter="nao-pago">
              <span class="filter-icon">â±</span>
              <span>NÃ£o Pagos</span>
            </button>
          </div>

          <div id="appointmentsList" class="list" style="margin-top:16px"></div>
        </section>

        <section class="card hidden" id="tab-finance">
          <h3>Controle Financeiro</h3>
          <div class="small">AnÃ¡lise de sessÃµes pagas no perÃ­odo selecionado</div>
          
          <!-- Filtros de PerÃ­odo (FinanÃ§as) -->
          <div class="period-filters" style="margin-top:16px">
            <button class="finance-period-btn" data-period="current-week">
              <span class="period-icon">ğŸ“…</span>
              <span>Semana Atual</span>
            </button>
            <button class="finance-period-btn active" data-period="current-month">
              <span class="period-icon">ğŸ“†</span>
              <span>MÃªs Atual</span>
            </button>
            <button class="finance-period-btn" data-period="custom">
              <span class="period-icon">ğŸ—“ï¸</span>
              <span>PerÃ­odo Personalizado</span>
            </button>
          </div>

          <!-- Filtros de Data Personalizados (FinanÃ§as) -->
          <div id="customFinancePeriodFilters" class="hidden" style="margin-top:12px">
            <div class="row">
              <div class="col">
                <label class="small" style="display:block;margin-bottom:6px;font-weight:600">Data InÃ­cio:</label>
                <input type="date" id="financeFilterDateStart" class="input">
              </div>
              <div class="col">
                <label class="small" style="display:block;margin-bottom:6px;font-weight:600">Data Fim:</label>
                <input type="date" id="financeFilterDateEnd" class="input">
              </div>
            </div>
            <button class="btn btn-primary btn-sm" onclick="applyCustomFinancePeriod()" style="margin-top:8px">Aplicar Filtro</button>
          </div>

          <!-- Cards Financeiros -->
          <div class="finance-cards">
            <div class="finance-card">
              <div class="finance-card-icon">ğŸ’µ</div>
              <div class="finance-card-label">Ticket MÃ©dio</div>
              <div class="finance-card-value" id="financeTicketMedio">R$ 0,00</div>
            </div>
            <div class="finance-card">
              <div class="finance-card-icon">ğŸ“Š</div>
              <div class="finance-card-label">Quantidade</div>
              <div class="finance-card-value" id="financeQuantidade">0</div>
            </div>
            <div class="finance-card">
              <div class="finance-card-icon">ğŸ’°</div>
              <div class="finance-card-label">Total Recebido</div>
              <div class="finance-card-value" id="financeTotal">R$ 0,00</div>
            </div>
          </div>

          <!-- Ranking de Massagens -->
          <div style="margin-top:24px">
            <h4 style="margin-bottom:12px;font-size:1.15rem">ğŸ† Ranking de Massagens</h4>
            <div class="small" style="margin-bottom:12px">Tipos mais realizados no perÃ­odo</div>
            <div id="massageRanking"></div>
          </div>
        </section>
      </main>
    </div>

    <!-- RODAPÃ‰ -->
    <footer class="app-footer">
      <div class="footer-content">
        <div class="footer-section footer-about">
          <div class="footer-logo">
            <div class="logo-placeholder footer-logo-icon"></div>
            <div class="footer-brand">
              <h3>Massagens Zen</h3>
              <p>Relaxamento e bem-estar</p>
            </div>
          </div>
          <p class="footer-description">
            Seu espaÃ§o de tranquilidade e renovaÃ§Ã£o. Oferecemos massagens terapÃªuticas para seu corpo e mente.
          </p>
        </div>

        <div class="footer-section footer-contact">
          <h4>Contato</h4>
          <div class="footer-contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <div>
              <strong>EndereÃ§o</strong>
              <p>Rua das Flores, 123 - Centro<br>Passo Fundo/RS - CEP 99010-000</p>
            </div>
          </div>
          <div class="footer-contact-item">
            <i class="fas fa-phone"></i>
            <div>
              <strong>Telefone</strong>
              <p>(54) 3311-5500</p>
            </div>
          </div>
          <div class="footer-contact-item">
            <i class="fas fa-clock"></i>
            <div>
              <strong>HorÃ¡rio</strong>
              <p>Seg-Sex: 8h Ã s 20h<br>SÃ¡b: 8h Ã s 14h</p>
            </div>
          </div>
        </div>

        <div class="footer-section footer-social">
          <h4>Redes Sociais</h4>
          <p style="margin-bottom: 16px;">Siga-nos e fique por dentro das novidades!</p>
          <div class="social-links">
            <a href="https://wa.me/5554933115500" target="_blank" rel="noopener" class="social-link whatsapp" title="WhatsApp">
              <i class="fab fa-whatsapp"></i>
              <span>WhatsApp</span>
            </a>
            <a href="https://facebook.com/massagenszen" target="_blank" rel="noopener" class="social-link facebook" title="Facebook">
              <i class="fab fa-facebook-f"></i>
              <span>Facebook</span>
            </a>
            <a href="https://instagram.com/massagenszen" target="_blank" rel="noopener" class="social-link instagram" title="Instagram">
              <i class="fab fa-instagram"></i>
              <span>Instagram</span>
            </a>
            <a href="https://maps.google.com/?q=Rua+das+Flores+123+Passo+Fundo" target="_blank" rel="noopener" class="social-link location" title="LocalizaÃ§Ã£o">
              <i class="fas fa-map-marked-alt"></i>
              <span>LocalizaÃ§Ã£o</span>
            </a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 Massagens Zen. Todos os direitos reservados.</p>
        <p class="footer-dev">Desenvolvido com ğŸ’š para seu bem-estar</p>
      </div>
    </footer>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  
  <!-- Scripts -->
  <script src="firebase-config.js"></script>
  <script src="admin.js"></script>
</body>
</html>
